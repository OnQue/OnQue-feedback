<!DOCTYPE html>
<html>
<head>
	<title>Feedback</title>
	<script src="/static/js/jquery.min.js"></script>
	<script src="/static/js/star-rating.js" type="text/javascript"></script>
    <script src="/static/js/bootbox.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#restaurantratings input").rating({
                showCaption: false

            });
            var url = document.URL
            if(url.indexOf("Invalid") > -1){
                alert("Invalid inputs");}

            if(url.indexOf("thanks") > -1){
                alert("Thank you for your Feedback");
            }

            if(url.indexOf("required") > -1){
                alert("Name and Number are required fields");
            }
            

        });

    </script>
</head>
<body>
	<div class="page-container">
                
<div class="main-content">



    <div class="row">

        <!-- Profile Info and Notifications -->
        <div class="col-md-6 col-sm-8 clearfix">
                <ul class="user-info pull-left pull-none-xsm">

            <!-- Profile Info -->
            <li class="profile-info dropdown"><!-- add class "pull-right" if you want to place this from right -->

                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    {{client.rest_name}}
                </a>

            </li>

        </ul>

        </div>


        <!-- Raw Links -->
<!--         <div class="col-md-6 col-sm-4 clearfix hidden-xs">

            <ul class="list-inline links-list pull-right">
                <li>
                    <a href="/dashboard/">Dashboard</a>
                </li>


                <li class="sep"></li>

                <li>
                    <a href="/logout/">
                        Log Out <i class="entypo-logout right"></i>
                    </a>
                </li>
            </ul>

        </div> -->

    </div>
    <hr>


    

    <form action="" method="POST" class="form-horizontal" id="feedform"
              data-bv-message="This value is not valid"
      data-bv-feedbackicons-valid="glyphicon glyphicon-ok"
      data-bv-feedbackicons-invalid="glyphicon glyphicon-remove"
      data-bv-feedbackicons-validating="glyphicon glyphicon-refresh">
        {% csrf_token %}


        <div class="row">
            <div class="col-sm-4 col-sm-offset-4">
                <label style="">Table No.</label>

                <select name="tableno" class="form-control" style="margin-bottom: 20px">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option>10</option>
                <option>11</option>
                <option>12</option>
                <option>13</option>
                <option>14</option>
                <option>15</option>
                <option>16</option>
                <option>17</option>
                <option>18</option>
                <option>19</option>
                <option>20</option>
                <option>21</option>
                <option>22</option>
                <option>23</option>
                <option>24</option>
                <option>25</option>
                <option>26</option>
                <option>27</option>
                <option>28</option>
                <option>29</option>
                <option>30</option>
                <option>31</option>
                <option>32</option>
                <option>33</option>
                <option>34</option>
                <option>35</option>
            </select>
            </div>

        </div>


        <div class="row">
            <div class="col-sm-6">
                <div class="panel panel-primary" style="border-color: #ebebeb;" >
                    <div class="panel-heading" style="color: #373e4a;
background-color: #ffffff;
border-color: #ebebeb;">
                        <div class="panel-title">
                            Rating
                        </div>
                    </div>
                    <div class="panel-body">

                        <div id="restaurantratings">

                            <div class="row">
                                <div class="col-sm-5"><h3>{{rating_texts.food_text}}</h3></div>
                                <div class="col-sm-7 "><input name="rating_qof" id="rating_qof" data-min="0" data-max="5" data-step="1">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-5"><h3>{{rating_texts.service_text}}</h3></div>
                                <div class="col-sm-7"><input name="rating_qos" id="rating_qos" data-min="0" data-max="5" data-step="1">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-5"><h3>{{rating_texts.staff_friend_text}}</h3></div>
                                <div class="col-sm-7"><input name="rating_sf" id="rating_sf" data-min="0" data-max="5" data-step="1">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-5"><h3>{{rating_texts.ambience_text}}</h3></div>
                                <div class="col-sm-7"><input name="rating_ab" id="rating_ab" data-min="0" data-max="5" data-step="1">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-5"><h3>{{rating_texts.overall_exp_text}}</h3></div>
                                <div class="col-sm-7"><input name="rating_oe" id="rating_oe" data-min="0" data-max="5" data-step="1">
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="panel panel-primary" style="border-color: #ebebeb;">
                    <div class="panel-heading" style="color: #373e4a;
background-color: #ffffff;
border-color: #ebebeb;">
                        <div class="panel-title">
                            Info
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="form-group">

                                <div class="col-sm-12">
                                    <input type="text" name="info_name" class="form-control input-lg" id="info_name" placeholder="Name" data-bv-notempty="true" data-bv-notempty-message="The first name is required and cannot be empty">
                                </div>
                        </div>
                        <div class="form-group">

                                <div class="col-sm-12">
                                    <input type="text" name="info_contact" class="form-control input-lg" id="info_name" placeholder="Contact" data-fv-phone-message="The value is not valid %s phone number" required data-fv-phone="true">
                                </div>
                        </div>
                        {% for question in questions %}
                        <div class="form-group">
                                <div class="col-sm-12">
                                    <input type="text" name='question_{{question.id}}' class="form-control input-lg" placeholder='{{question.question_text}}'>
                                </div>
                        </div>
                        {% endfor %}

                        <div class="form-group">
                            
                            <div class="controls form-inline">
                                
                                <!-- <label for="inputKey">Key</label> -->
                                <!-- <input type="text" class="input-small" placeholder="Key" id="inputKey"> -->
                                <div class="col-sm-12">
                                    <span class="control-label">Date of Birth</span>
                                    <select class="form-control" name="dob_month">
                                        <option>January</option>       
                                        <option>February</option>       
                                        <option>March</option>       
                                        <option>April</option>       
                                        <option>May</option>       
                                        <option>June</option>       
                                        <option>July</option>       
                                        <option>August</option>       
                                        <option>September</option>       
                                        <option>October</option>       
                                        <option>November</option>       
                                        <option>December</option>
                                    </select > 

                                    <select name="dob_date" class="form-control"> 
                                    <option value="01">1</option>       
                                    <option value="02">2</option>       
                                    <option value="03">3</option>       
                                    <option value="04">4</option>       
                                    <option value="05">5</option>       
                                    <option value="06">6</option>       
                                    <option value="07">7</option>       
                                    <option value="08">8</option>       
                                    <option value="09">9</option>       
                                    <option>10</option>       
                                    <option>11</option>       
                                    <option>12</option>       
                                    <option>13</option>       
                                    <option>14</option>       
                                    <option>15</option>       
                                    <option>16</option>       
                                    <option>17</option>       
                                    <option>18</option>       
                                    <option>19</option>       
                                    <option>20</option>       
                                    <option>21</option>       
                                    <option>22</option>       
                                    <option>23</option>       
                                    <option>24</option>       
                                    <option>25</option>       
                                    <option>26</option>       
                                    <option>27</option>       
                                    <option>28</option>       
                                    <option>29</option>       
                                    <option>30</option>       
                                    <option>31</option>       
                                  </select> 

                                  <select  name="dob_year" class="form-control"> 
                                    <option value='1970'>1970</option>
                                    <option value='1971'>1971</option>
                                    <option value='1972'>1972</option>
                                    <option value='1973'>1973</option>
                                    <option value='1974'>1974</option>
                                    <option value='1975'>1975</option>
                                    <option value='1976'>1976</option>
                                    <option value='1977'>1977</option>
                                    <option value='1978'>1978</option>
                                    <option value='1979'>1979</option>
                                    <option value='1980'>1980</option>
                                    <option value='1981'>1981</option>
                                    <option value='1982'>1982</option>
                                    <option value='1983'>1983</option>
                                    <option value='1984'>1984</option>
                                    <option value='1985'>1985</option>
                                    <option value='1986'>1986</option>
                                    <option value='1987'>1987</option>
                                    <option value='1988'>1988</option>
                                    <option value='1989'>1989</option>
                                    <option selected value='1990'>1990</option>
                                    <option value='1991'>1991</option>
                                    <option value='1992'>1992</option>
                                    <option value='1993'>1993</option>
                                    <option value='1994'>1994</option>
                                    <option value='1995'>1995</option>
                                    <option value='1996'>1996</option>
                                    <option value='1997'>1997</option>
                                    <option value='1998'>1998</option>
                                    <option value='1999'>1999</option>
                                    <option value='2000'>2000</option>
                                    <option value='2001'>2001</option>
                                    <option value='2002'>2002</option>
                                    <option value='2003'>2003</option>
                                    <option value='2004'>2004</option>
                                    <option value='2005'>2005</option>     
                                  </select> 

                                    <!-- <label for="inputValue">Value</label> -->
                                    <!-- <input type="password" class="input-small" placeholder="Value" id="inputValue"> -->
                                </div>
                            </div>
                        </div>

<!--                         <div class="form-group">

                                <div class="col-sm-4">
                                <span class="lab">DOB</span>
                                </div>
                                <div class="col-sm-8">
                                <input type="text" name="dob" class="form-control input-lg" id="dob" placeholder="dd/mm/yyyy">
                                </div>
                        </div> -->
                        
                  <!--        <div class="form-group">
                            <div class="col-sm-12">
                                <input type="checkbox">I would like to receive info.
                            </div>
                        </div>  -->

<!--                         <div class="form-group">

                                <div class="col-sm-4">
                                <span class="lab">Anniversary</span>
                                </div>
                                <div class="col-sm-8">
                                     <input type="text" name="anniversary" class="form-control input-lg" id="anniversary" placeholder="dd/mm/yyyy"
                                </div>
                        </div> -->

                       <!--  <div class="form-group">

                            <div class="col-sm-12">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="entypo-mail"></i></span>
                                    <input type="text" name="info_email"  class="form-control input-lg" placeholder="Email">
                                </div>
                            </div>
                        </div> -->


                        <div class="form-group">
                            <div class="col-sm-12">
                                <textarea class="form-control autogrow" name="comments" id="field-ta" placeholder="Suggestions, Comments?" style="overflow: hidden; word-wrap: break-word; resize: horizontal; height: 48px;"></textarea>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <button type="SUBMIT" class="btn btn-primary"
                    style="width: 200px; display: block; margin-left: auto; margin-right: auto;">Submit!
            </button>
        </div>

    </form>

 

    <!-- Footer -->
    <footer class="main">



        © 2015 <strong>OnQue</strong> | Restaurant Admin

    </footer>
</div>


</div>
	<!-- <link rel="stylesheet" type="text/css" href="static/normalize.css"> -->
	<link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
    <script src="/static/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="/static/css/feedback_service/stars.css">
    <link rel="stylesheet" type="text/css" href="/static/css/feedback_service/custom.css">
<!--     <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.3/css/bootstrapValidator.min.css"/>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.3/js/bootstrapValidator.min.js"></script> -->

  <script>
      //custom select box



      $(document).ready(function() {
    // $('#feedform').formValidatoion();
    if (navigator.onLine == false){
        console.log("OFFline");
    } else {
        console.log("IT is online");
        data = localStorage['form'];
        console.log(data);
        console.log(localStorage.length);
        if (localStorage.length) {
            console.log("Am sending");
            for (var key in localStorage){
                if (key=='showIcon' || key=='urlBlackList'){
                    continue;
                }
               var data = localStorage[key];
               console.log(key+":"+data);
                $.ajax({
                    type: 'post',
                    url: '/feedback/',
                    data: data,
                    success: function (data) {
                        console.log("Done for ->"+ key);
                    }
                });
            }
            localStorage.clear();
        }
    }
});

  </script>
  <script type="text/javascript">




    var frm = $('#feedform');
    frm.submit(function (ev) {
        console.log("Submitting");
        var data = frm.serialize();

        var test = function isOnline(){

            var xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHttp');
            xhr.onload = function(){
                console.log("REACHABLE");
                $.ajax({
                    type: frm.attr('method'),
                    url: frm.attr('action'),
                    data: frm.serialize(),
                    success: function (data) {
                        bootbox.alert("Thank you! for your feedback", function() {
                            document.getElementById("feedform").reset();
                          // location.reload('/feedback/');
                        });
                        
                    }
                });
            }
            xhr.onerror = function(){
                console.log("not REACHABLE");
                console.log("OFFline");
                localStorage[localStorage.length+1] = data;
                bootbox.alert("Thank you! for your feedback", function() {
                    document.getElementById("feedform").reset();
                    // location.reload('/feedback/');
                });
            }
            xhr.open("GET","/",true);
            xhr.send();

        }

        console.log(typeof(data));
        test();
        // if (navigator.onLine == false) {
        //     console.log("OFFline");
        //     localStorage[localStorage.length+1] = data;
        //     bootbox.alert("Thank you! for your feedback", function() {
        //         document.getElementById("feedform").reset();
        //         // location.reload('/feedback/');
        //     });

        // } else {
        //     $.ajax({
        //         type: frm.attr('method'),
        //         url: frm.attr('action'),
        //         data: frm.serialize(),
        //         success: function (data) {
        //             bootbox.alert("Thank you! for your feedback", function() {
        //                 document.getElementById("feedform").reset();
        //               // location.reload('/feedback/');
        //             });
                    
        //         }
        //     });
        // }

        ev.preventDefault();
    });

//     var test = function isOnline(){

//             var xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHttp');
//             xhr.onload = function(){
//                 console.log("REACHABLE");
//                 $.ajax({
//                     type: frm.attr('method'),
//                     url: frm.attr('action'),
//                     data: frm.serialize(),
//                     success: function (data) {
//                         bootbox.alert("Thank you! for your feedback", function() {
//                             document.getElementById("feedform").reset();
//                           // location.reload('/feedback/');
//                         });
                        
//                     }
//                 });
//             }
//             xhr.onerror = function(){
//                 console.log("not REACHABLE");
//                 console.log("OFFline");
//                 localStorage[localStorage.length+1] = data;
//                 bootbox.alert("Thank you! for your feedback", function() {
//                     document.getElementById("feedform").reset();
//                     // location.reload('/feedback/');
//                 });
//             }
//             xhr.open("GET","/",true);
//             xhr.send();

// }

// isOnline(
//     function(){
//         alert("Sorry, we currently do not have Internet access.");
//     },
//     function(){
//         alert("Succesfully connected!");
//     }
// );
</script>
</body>
</html>